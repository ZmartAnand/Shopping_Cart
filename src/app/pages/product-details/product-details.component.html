<app-navbar></app-navbar>

<div class="container my-5">
  <!-- Loading Overlay -->
  <div *ngIf="loading" class="position-fixed top-0 start-0 w-100 h-100 bg-light d-flex justify-content-center align-items-center" style="opacity: 0.9; z-index: 1050;">
    <div class="spinner-border text-success" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
<!-- Centered Container -->
<div class="container" style="max-width: 1000px;">
  <!-- Product Card -->
  <div class="border-0 shadow-lg overflow-hidden rounded-4 bg-white">
    <div class="row g-0">
      <!-- Product Image -->
      <div class="col-lg-6 bg-light p-4">
        <div class="h-100 d-flex justify-content-center align-items-center">
          <img 
            [src]="product?.image || 'assets/images/default-product.jpg'" 
            [alt]="product?.name" 
            class="img-fluid rounded-3" 
            style="max-height: 400px; object-fit: contain;"
          />
        </div>
      </div>

      <!-- Product Info -->
      <div class="col-lg-6 p-4">
        <div class="h-100 d-flex flex-column">
          <!-- Product Header -->
          <div>
            <h1 class="h3 fw-bold text-dark mb-3">{{ product?.name }}</h1>

            <!-- Rating -->
            <div class="d-flex align-items-center mb-3">
              <div class="rating-stars me-2">
                <i class="fas fa-star text-warning" *ngFor="let s of getStars(product?.rating).full"></i>
                <i class="fas fa-star-half-alt text-warning" *ngIf="getStars(product?.rating).half"></i>
                <i class="far fa-star text-warning" *ngFor="let s of getStars(product?.rating).empty"></i>
              </div>
              <span class="text-muted">({{ product?.reviews }} reviews)</span>
            </div>

            <!-- Price -->
            <div class="mb-3">
              <h2 class="text-success fw-bold h2">₹{{ product?.price | number }}</h2>
              <p class="text-success mb-0">
                <i class="fas fa-check-circle me-2"></i>
                In Stock • Free Shipping
              </p>
            </div>
          </div>

          <!-- Description -->
          <div class="mb-3">
            <h3 class="h6 fw-semibold text-dark mb-2">Product Details</h3>
            <p class="text-muted small">{{ product?.description }}</p>
          </div>

          <!-- Action Buttons -->
          <div class="mt-auto pt-3">
            <div class="d-grid gap-2">
              @if (!isInCart(product)) {
                <button class="btn btn-success btn-sm py-2" (click)="addtocart(product)">
                  <i class="fas fa-shopping-cart me-1"></i> Add To Cart - ₹{{ product?.price | number }}
                </button>
              } @else {
                <button class="btn btn-outline-success btn-sm py-2" routerLink="/cart">
                  <i class="fas fa-check-circle me-1"></i> Added to Cart
                </button>
              }

              <button class="btn btn-outline-dark btn-sm py-2" routerLink="/home">
                <i class="fas fa-arrow-left me-1"></i> Continue Shopping
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  <!-- Features Section -->
  <div class="row mt-5 g-4">
    <div class="col-md-4">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body text-center p-4">
          <i class="fas fa-shield-alt text-primary fs-1 mb-3"></i>
          <h5 class="fw-bold">1 Year Warranty</h5>
          <p class="text-muted mb-0">Manufacturer warranty included</p>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body text-center p-4">
          <i class="fas fa-truck text-primary fs-1 mb-3"></i>
          <h5 class="fw-bold">Free Shipping</h5>
          <p class="text-muted mb-0">On all orders over ₹500</p>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body text-center p-4">
          <i class="fas fa-undo-alt text-primary fs-1 mb-3"></i>
          <h5 class="fw-bold">Easy Returns</h5>
          <p class="text-muted mb-0">30-day return policy</p>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>